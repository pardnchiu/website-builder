import{navs as e,headers as t,sections as o,templates as i,w3 as n,map as a}from"./model.min.js";let l,s,d,r,h,c;var u;let p,y;window,u=document,_0_,_1_,_2_,_3_,_4_,_5_,_6_,_7_,_8_,_9_,$0,$1,$2,$3,$4,$5,$6,$7,$8,$9,__0,__1,__2,__3,__4,__5,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,$_0,$_1,$_2,$_3,$_4,$_5,$0_,$1_,$2_,$3_,$4_,$5_,$6_,$7_,$8_,$9_,u.addEventListener("DOMContentLoaded",(function(){function e(){setInterval((()=>{const e=r.body.$w;r.body.$selAll("svg.mask").forEach((t=>{const o=t.$attr("type"),i=t.$$class("top"),n=t.$h,a=Math.floor(e/2);/convex/.test(o)?t.$child(0)._attr({d:`M 0 ${n}, Q ${a} 0, ${e} ${n}, L 0 ${n}`}):/concave/.test(o)?t.$child(0)._attr({d:`M 0 0, Q ${a} ${2*n}, ${e} 0, L ${e} ${n}, 0 ${n}`}):/slash-left/.test(o)?i?t.$child(0)._attr({d:`M 0 ${n}, L ${e} 0, L ${e} ${n}`}):t.$child(0)._attr({d:`M ${e} ${n}, L 0 0, L 0 ${n}`}):/slash-right/.test(o)&&(i?t.$child(0)._attr({d:`M ${e} ${n}, L 0 0, L 0 ${n}`}):t.$child(0)._attr({d:`M 0 ${n}, L ${e} 0, L ${e} ${n}`}))}))}),300)}l=new $dom({id:"website-builder",event:{download:function(e){delete r.body.dataset.mode,r.body.$selAll("*[data-href]:not([data-href=''])").forEach((e=>e.href=e.dataset.href)),r.body.$selAll("*[readonly]").forEach((e=>(e.readOnly=!1,e.dataset.readonly=1))),[...r.document.scripts].forEach((e=>{"user-scripts"===e.dataset.name&&(e.innerHTML=`\n                            document.addEventListener("DOMContentLoaded", function () {\n                                ${e.innerHTML}\n                            });\n                            `)}));var t=r.document.documentElement.outerHTML,o=new Blob([t],{type:"text/html"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download=`website-${Date.now()}.html`,i.click(),r.body.dataset.mode="edit",r.body.$selAll("*[href]:not([href=''])").forEach((e=>e.href="")),r.body.$selAll("*[data-readonly='1']").forEach((e=>(e.readOnly=!0,delete e.dataset.readonly)))},bodyLeftSwitch:function(t){const o=parseInt(document.body.dataset.left);document.body.dataset.left=o?0:1,e()},bodyRightSwitch:function(t,o){if(o)document.body.dataset.right=1;else{const e=parseInt(document.body.dataset.right);document.body.dataset.right=e?0:1}e()},modeMobile:function(){document.body.dataset.type="mobile",e()},modeTablet:function(){document.body.dataset.type="tablet",e()},modeDesktop:function(){document.body.dataset.type="desktop",e()}},next:()=>{u.body._class("ready")._data({left:1,right:1,tpye:"desktop"}),s="builder-body".$,null!=s&&(r=new f((e=>{d=new g,h=new w,r.body.addEventListener("click",(function(){h.init(this)})),c='\n                    document.body.onscroll = function() {\n                        console.log("test");\n                    }\n                    ',[...r.document.scripts].forEach((e=>{"user-scripts"===e.dataset.name&&(e.innerHTML='\n                    document.body.onscroll = function() {\n                        console.log("test");\n                    }\n                    ')}))})))}})})),function(e){let t,o,i,n,a,l,s;p=function(){o="canvas"._({width:400,height:400}),i="div"._(),n="span"._(),a="input"._({placeholder:"rgba(0, 0, 0, 0)"}),l=o.getContext("2d"),s="button"._("送出"),t="section#color-picker"._(["section"._([o,i,"section"._([n,a,s])])]),e.body._child(t);for(var d=o.width/2,r=o.height/2,h=d,c=r,u=0;u<360;u+=.1){var p=u*(2*Math.PI)/360;l.strokeStyle=`hsla(${u}, 100%, 50%, 1.0)`,l.beginPath(),l.moveTo(d,r),l.lineTo(d+h*Math.cos(p),r+c*Math.sin(p)),l.stroke()}var y=l.createRadialGradient(d,r,0,d,r,200);function f(e,t){var o=l.getImageData(e,t,1,1).data,i=o[0],n=o[1],a=o[2],s=o[3]/255;s=Math.round(100*s)/100;var d=i.toString(16);i<16&&(d="0"+d);var r=n.toString(16);n<16&&(r="0"+r);var h=a.toString(16);return a<16&&(h="0"+h),{rgba:"rgba("+i+","+n+","+a+","+s+")",rgb:"rgb("+i+","+n+","+a+")",hex:"#"+d+r+h,r:i,g:n,b:a,a:s}}y.addColorStop(0,"rgba(0, 0, 0, 0.4)"),y.addColorStop(.1,"rgba(0, 0, 0, 0.3)"),y.addColorStop(.2,"rgba(0, 0, 0, 0.2)"),y.addColorStop(.3,"rgba(0, 0, 0, 0.1)"),y.addColorStop(.4,"rgba(0, 0, 0, 0)"),y.addColorStop(.5,"rgba(0, 0, 0, 0)"),y.addColorStop(.6,"rgba(255, 255, 255, 0)"),y.addColorStop(.7,"rgba(255, 255, 255, 0.1)"),y.addColorStop(.8,"rgba(255, 255, 255, 0.2)"),y.addColorStop(.9,"rgba(255, 255, 255, 0.3)"),y.addColorStop(1,"rgba(255, 255, 255, 0.4)"),l.fillStyle=y,l.beginPath(),l.arc(d,r,200,0,2*Math.PI),l.fill(),a._keyup((function(){i._style({display:"none"}),n._style({backgroundColor:this.value})})),o.addEventListener("click",(t=>{const o=e.body.clientWidth,l=e.body.clientHeight,s=t.clientX-(o-400)/2,d=t.clientY-(l-400-80)/2;i._style({display:"block",top:t.clientY-2+"px",left:t.clientX-2+"px"}),n._style({backgroundColor:f(s,d).rgba}),a.value=f(s,d).rgba}))},y=function(e,o){t||p();let i=setTimeout((()=>{clearTimeout(i),t._class("show"),n._style({backgroundColor:e||"#000000"}),a.value=e||"#000000",s._click((function(){o(n.style.backgroundColor),this.$parent(2).class_("show")}))}),1)}}(document);class f{constructor(e){if(null==this.body){const t="iframe"._();t.srcdoc='\n            <!DOCTYPE html>\n            <html lang="zh-Hans-TW">\n            <head>\n            <meta charset="UTF-8">\n            <meta http-equiv="X-UA-Compatible" content="IE=edge">\n            <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">\n            <script src="https://cdn.jsdelivr.net/gh/pardnchiu/PDExtension-js@1.0.1/js/PDExtension.min.js" copyright="Pardn Ltd"><\/script>\n            <link rel="stylesheet" href="https://pardnchiu.github.io/css/fontawesome/css/all.min.css">\n\t\t    <link title="model-css" rel="stylesheet" href="./css/website.css">\n            <link rel="preconnect" href="https://fonts.googleapis.com">\n            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n            <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;300;400;500;700;900&family=Roboto+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">\n            </head>\n            <script data-name="user-scripts" defer><\/script>\n            <script>\n            function updateMask() {\n                const width = document.body.$w;\n\n                document.body.$selAll("svg.mask").forEach(e => {\n                    const type = e.$attr("type");\n                    const isTop = e.$$class("top");\n                    const height = e.$h;\n                    const half = Math.floor(width / 2);\n\n                    if (/convex/.test(type)) {\n                        e.$child(0)._attr({ d: `M 0 ${height}, Q ${half} 0, ${width} ${height}, L 0 ${height}` })\n                    }\n                    else if (/concave/.test(type)) {\n                        e.$child(0)._attr({ d: `M 0 0, Q ${half} ${height * 2}, ${width} 0, L ${width} ${height}, 0 ${height}` })\n                    }\n                    else if (/slash-left/.test(type)) {\n                        isTop ? e.$child(0)._attr({ d: `M 0 ${height}, L ${width} 0, L ${width} ${height}` }) : e.$child(0)._attr({ d: `M ${width} ${height}, L 0 0, L 0 ${height}` });\n                    }\n                    else if (/slash-right/.test(type)) {\n                        isTop ? e.$child(0)._attr({ d: `M ${width} ${height}, L 0 0, L 0 ${height}` }) : e.$child(0)._attr({ d: `M 0 ${height}, L ${width} 0, L ${width} ${height}` });\n                    }\n                });\n            };\n            document.addEventListener("DOMContentLoaded", function () {\n                updateMask();\n\n                window.addEventListener("resize", function() {\n                    updateMask();\n                }, true);\n            });\n            <\/script>\n            <body data-mode="edit"></body>\n            </html>',s._child([t]),t.onload=()=>{this.document=t.contentDocument,this.body=this.document.body,this.styleSheets=this.document.styleSheets,e instanceof Function&&e()}}}scrollToBottom(){this.body.$parent(0).scrollToBottom()}}class g{constructor(){null==this.body&&(this.body="section.left"._(),this.init(),s.$parent(0)._child([this.body]))}init(){this.body.__child([this.tab(0),this.button(0),"section.body"._([k({show:1,heading:`範例 (${i.$keys.length})`,type:"input",children:i.$keys._$((e=>"img"._(i[e].cover)._click((t=>{r.body.$childAll.length>0?confirm("替換為範例內容?")&&(r.body._attr({sn:e.replace(/n/,"")}).__(),h.init(r.body),(i[e].body()||[]).length>0&&i[e].body().forEach((e=>this.addToDomCenter(e)))):(r.body._attr({sn:e.replace(/n/,"")}),(i[e].body()||[]).length>0&&i[e].body().forEach((e=>this.addToDomCenter(e))))}))))})])])}addToDomCenter(e,t){(()=>{const e=(r.body.$childAll||[]).length>0,t=(r.body.innerText||"").length<1;e||t||r.body.__child(["span"._(r.body.innerText)])})();let o=z.new(e._$(!0));r.body._child(o),h.init(),t&&r.scrollToBottom()}template(){this.body.__child([this.tab(0),this.button(1),"section.body"._([k({show:1,heading:`導覽列 (${e.$keys.length})`,type:"input",children:e.$keys._$((t=>"img"._(e[t].cover)._click((o=>this.addToDomCenter(e[t].body(),1)))))}),k({show:1,heading:`標頭 (${t.$keys.length})`,type:"input",children:t.$keys._$((e=>"img"._(t[e].cover)._click((o=>this.addToDomCenter(t[e].body(),1)))))}),k({show:1,heading:`區塊 (${o.$keys.length})`,type:"input",children:o.$keys._$((e=>"img"._(o[e].cover)._click((t=>this.addToDomCenter(o[e].body(),1)))))})])])}page(){return"section.pg.rz.vert"._(["strong"._("頁面"),"button"._("Landing Page"),"button"._(["fa-solid fa-plus"._fa,"新增頁面"])])}tab(e){return"ul.tab"._({index:e},[v({fa:"fa-solid fa-bars-staggered",title:"模塊"})._click((e=>this.init())),v({fa:"fa-solid fa-box",title:"元件"})._click((e=>this.get_tag()))])}button(e){return"ul.button.r2"._({index:e},[v({fa:"fa-solid fa-table-columns",title:"範例"})._click((e=>this.init())),v({fa:"fa-solid fa-layer-group",title:"區塊"})._click((e=>this.template()))])}get_tag(){function e(e){return"button"._(["strong"._(e.heading),"p"._(e.hint),e.fa._fa])._click(e.onclick)}let t="Lorem",o="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam pharetra ligula odio, sed aliquam augue tincidunt vel. Suspendisse sodales felis non ex tempus, ac aliquam lacus posuere. Etiam imperdiet aliquam elit, at tincidunt dui.";this.body.__child([this.tab(1),"section.body"._([k({show:1,heading:"文字/連結 (11)",type:"tag",children:[e({heading:"標題",hint:"Heading",fa:"fa-solid fa-heading",onclick:()=>h.add("h1"._("Lorem ipsum dolor sit amet"))}),e({heading:"文字",hint:"P",fa:"fa-solid fa-paragraph",onclick:()=>h.add("p"._(o))}),e({heading:"粗體字",hint:"Strong",fa:"fa-solid fa-bold",onclick:()=>h.add("strong"._(t))}),e({heading:"斜體字",hint:"Em",fa:"fa-solid fa-italic",onclick:()=>h.add("em"._(t))}),e({heading:"強調",hint:"Mark",fa:"fa-solid fa-marker",onclick:()=>h.add("mark"._(t))}),e({heading:"連結",hint:"A",fa:"fa-solid fa-link",onclick:()=>h.add("a"._(t))}),e({heading:"按鈕",hint:"Button",fa:"fa-solid fa-ticket-simple",onclick:()=>h.add("button"._(t))}),e({heading:"引用",hint:"Blockquote",fa:"fa-solid fa-quote-right",onclick:()=>h.add("blockquote"._(o))}),e({heading:"預格式化",hint:"Pre",fa:"fa-solid fa-align-justify",onclick:()=>h.add("pre"._("Lorem ipsum dolor sit amet, consectetur adipiscing elit.\nNullam pharetra ligula odio, sed aliquam augue tincidunt vel.\nSuspendisse sodales felis non ex tempus, ac aliquam lacus posuere.\nEtiam imperdiet aliquam elit, at tincidunt dui."))}),e({heading:"時間",hint:"Time",fa:"fa-solid fa-calendar",onclick:function(){let e=new Date,t=`${e.$y}-${e.$MM}-${e.$DD}`;h.add("time"._({datetime:t},t))}}),e({heading:"圖示",hint:"Fontawesome",fa:"fa-solid fa-font-awesome",onclick:()=>h.add("fa-solid fa-font-awesome"._fa)})]}),k({show:1,heading:"輸入 (6)",type:"tag",children:[e({heading:"表單",hint:"Form",fa:"fa-solid fa-pen-to-square",onclick:function(){var e="form"._(["label"._(["input"._({placeholder:"輸入內容",name:"new-input",readonly:"readonly"})])]);h.add(e)}}),e({heading:"單行輸入",hint:"Input",fa:"fa-solid fa-i-cursor",onclick:function(){h.add("label"._(["input"._({placeholder:"輸入內容",name:"new-input",readonly:"readonly"})]))}}),e({heading:"多行輸入",hint:"Textarea",fa:"fa-solid fa-i-cursor",onclick:function(){h.add("label"._(["textarea"._({rows:"5",cols:"10",placeholder:"輸入內容",name:"new-textarea",readonly:"readonly"})]))}}),e({heading:"下拉選單",hint:"Select",fa:"fa-solid fa-table-list",onclick:function(){h.add("label"._(["select"._(["option"._({value:1},`${t}1`),"option"._({value:2},`${t}2`)])._mousedown((function(){this._attr({disabled:""}),h.init(this),setTimeout((()=>{this.attr_("disabled")}),50)}))]))}}),e({heading:"核取方塊",hint:"Checkbox",fa:"fa-solid fa-square-check",onclick:function(){h.add("label"._(["input"._({type:"checkbox",name:"new-checkbox",value:"1",disabled:""}),"span"._(`${t}1`)]))}}),e({heading:"選項按鈕",hint:"Radio",fa:"fa-regular fa-circle-dot",onclick:function(){h.add("label"._(["input"._({type:"radio",name:"new-radio",value:"1",disabled:""}),"span"._(`${t}1`)]))}})]}),k({show:1,heading:"影音 (4)",type:"tag",children:[e({heading:"圖片",hint:"Image",fa:"fa-solid fa-image",onclick:function(){var e="img"._({src:"https://file-examples.com/storage/fe7bb0e37864d66f29c40ee/2017/10/file_example_JPG_100kB.jpg"});h.add(e)}}),e({heading:"音訊",hint:"Audio",fa:"fa-solid fa-headphones",onclick:function(){h.add("audio"._({controls:""},["source"._({src:"https://file-examples.com/storage/fe7bb0e37864d66f29c40ee/2017/11/file_example_MP3_700KB.mp3",type:"audio/mpeg"})]))}}),e({heading:"影片",hint:"Video",fa:"fa-solid fa-film",onclick:function(){h.add("video"._({controls:""},["source"._({src:"https://file-examples.com/storage/fe7bb0e37864d66f29c40ee/2017/04/file_example_MP4_480_1_5MG.mp4",type:"video/mp4"})]))}}),e({heading:"Youtube",hint:"Iframe",fa:"fa-brands fa-youtube",onclick:function(){let e="iframe.yt"._({src:"https://www.youtube-nocookie.com/embed/",frameborder:0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""});h.add(e),e.onload=function(){e.contentWindow.document.body.onclick=function(){h.init(e)}}}})]}),k({show:1,heading:"表格/列表 (3)",type:"tag",children:[e({heading:"表格",hint:"Table",fa:"fa-solid fa-table",onclick:function(){h.add("table"._(["thead"._(["tr"._(["th"._("標題"),"th"._("標題")])]),"tbody"._(["tr"._(["td"._("內容"),"td"._("內容")])])]))}}),e({heading:"無序列表",hint:"Ul",fa:"fa-solid fa-list-ul",onclick:function(){h.add("ul"._(["li"._("項目一"),"li"._("項目二"),"li"._("項目三")]))}}),e({heading:"有序列表",hint:"Ol",fa:"fa-solid fa-list-ol",onclick:function(){h.add("ol"._(["li"._("項目一"),"li"._("項目二"),"li"._("項目三")]))}})]}),k({show:1,heading:"區塊/水平線 (7)",type:"tag",children:[e({heading:"標頭",hint:"Header",fa:"fa-solid fa-heading",onclick:function(){h.add("header"._())}}),e({heading:"導覽列",hint:"Nav",fa:"fa-solid fa-window-maximize",onclick:function(){h.add("nav"._())}}),e({heading:"區塊",hint:"Section",fa:"fa-solid fa-table-columns",onclick:function(){h.add("section"._())}}),e({heading:"區塊",hint:"Div",fa:"fa-solid fa-table-columns",onclick:function(){h.add("div"._())}}),e({heading:"文章",hint:"Article",fa:"fa-solid fa-newspaper",onclick:function(){h.add("article"._())}}),e({heading:"頁尾",hint:"Footer",fa:"fa-solid fa-window-minimize",onclick:function(){h.add("footer"._())}}),e({heading:"水平線",hint:"Hr",fa:"fa-solid fa-minus",onclick:function(){h.add("hr"._())}})]}),k({show:1,heading:"其他 (1)",type:"tag",children:[e({heading:"Map",hint:"Iframe",fa:"fa-solid fa-map-location-dot",onclick:function(){let e="iframe.map"._({src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3616.806596834196!2d121.52771527626346!3d24.972693977856117!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x34680218de051f7b%3A0x1a200126a5466fc4!2zMjMx5paw5YyX5biC5paw5bqX5Y2A5Lit5aSu6LevMTUz6Jmf!5e0!3m2!1szh-TW!2stw!4v1692200031564!5m2!1szh-TW!2stw",load:"lazy",referrerpolicy:"no-referrer-when-downgrade"});h.add(e),e.onload=function(){e.contentWindow.document.body.onclick=function(){h.init(e)}}}})]})])])}}class b{constructor(e){let t={};if(t.id=x({size:2,heading:"ID",value:e.body.id,oninput:function(){this.value.$||(e.body.id=this.value)}}),t.class=x({size:2,heading:"Class",value:e.body.className,oninput:function(){e.body.className=this.value}}),e.isHeading&&(t.heading=x({size:1,heading:"類型",option:a.heading._(e.tagName,1).$obj,oninput:function(){const t=e.body,o=this.value._(t.innerHTML),i=window.getComputedStyle(t);o.id=t.id,o.classList=t.classList,o.style.color=i.color,o._click((function(e){e.stopPropagation(),right_content_init(this)})).$selAll("*").forEach((e=>e._click((function(e){e.stopPropagation(),right_content_init(this)})))),e.parent._child(o,t),e.remove(),h.init(o)}})),e.hasChild||(t.innerText=x({type:"textarea",heading:"文字",placeholder:"",value:e.body.innerText,oninput:function(){e.body.innerText=this.value}})),e.isLink&&(t.href=x({heading:"連結",value:e.body.dataset.href,oninput:function(){e.body._data({href:this.value})}}),t.target=x({size:1,heading:"開啟方式",option:a.target._(e.target,1).$obj,oninput:function(){const t="_self"===this.value;e.body._attr({target:t?"_self":"_blank",rel:t?"":"noreferrer noopenner nofollow"})}})),e.isButton&&(t.click=x({type:"textarea",heading:"Click",placeholder:"javascript",fontFamily:"monospace",value:e.body.dataset.onclick,oninput:function(){e.body._data({onclick:this.value})}})),e.isTime&&(t.datetime=x({heading:"時間",value:e.body.$attr("datetime"),oninput:function(){e.body.datetime=this.value},w3:n.datetime})),e.isFa&&(t.id=void 0,t.class=void 0,t.innerText=void 0,t.fontawesome=x({heading:"Font Awesome",value:e.body.className,oninput:function(){this.value=this.value.replace(/^(\<i\ class\=)?\"|\"\>\<\/i\>$/gi,""),e.body.__class(this.value)}}),t.fontawesomeLink=x({type:"button",heading:"",value:"前往 Font Awesome",onclick:e=>window.open("https://fontawesome.com/v6/search?o=r&m=free","_blank")})),e.isImg&&(t.innerText=void 0,t.src=x({heading:"Src",value:e.body.$attr("src"),oninput:function(){e.body.src=this.value}}),t.photos=x({type:"button",heading:"",value:"我的圖庫",onclick:function(){}}),t.alt=x({heading:"Alt",value:e.body.$attr("alt"),oninput:function(){e.body.alt=this.value}})),(e.isAudio||e.isVideo)&&(t.innerText=void 0,t.src=x({heading:"Src",value:e.body.$child(0).$attr("src"),oninput:function(){e.body.$child(0).src=this.value}}),t.type=x({heading:"Type",value:e.body.$child(0).$attr("type"),oninput:function(){e.body.$child(0).type=this.value}})),e.isYt&&(t.innerText=void 0,t.src=x({heading:"Src",value:e.body.$attr("src"),oninput:function(){const t=(()=>{let e=this.value.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return e&&11==e[7].length?e[7]:null})();null!=t&&(e.body.src=`https://www.youtube-nocookie.com/embed/${t}?rel=0`)}})),e.isInput){if(t.innerText=void 0,t.placeholder=x({heading:"Placeholder",value:e.body.$attr("placeholder"),oninput:function(){e.body._attr({placeholder:this.value})}}),!e.isTextarea)return;t.rows=x({size:2,heading:"行數",value:e.body.$attr("rows"),oninput:function(){e.body._attr({rows:this.value})}}),t.cols=x({size:2,heading:"字數",value:e.body.$attr("cols"),oninput:function(){e.body._attr({cols:this.value})}})}var o;if(e.isSelect&&(t.innerText=void 0,t.select=x({type:"textarea",heading:"選項",fontFamily:"monospace",placeholder:'{ key: "選項", value: "數值" }',value:(o="",e.body.$childAll.forEach((e=>o+=`{ key: "${e.$attr("value")}", value: "${e.innerText}" },\n`)),o),oninput:function(){e.body.$_();const t=this.value.match(/\{ ?key\: ?\"[\S]+\", ?value\: ?\"[\S]+\" ?\}/g);t&&t.forEach((t=>{const o=t.match(/\"([\S]+)?\"/g),i=o[1],n=o[0];i&&n&&(i=i.__(/\"/g,""),n=n.__(/\"/g,""),e.body._child("option"._({value:n},i)))}))}})),e.canMask){const o=new $(e,"top"),i=new $(e,"bottom");t.topMask=x({size:2,heading:"頂部遮罩",option:a.mask._(o.type,1).$obj,onchange:function(){"none"===this.value?o.remove():o.add(this.value)}}),t.topMaskColor=x({size:2,heading:"頂部遮罩顏色",type:"button",value:"",color:o.color,backgroundColor:o.color,onclick:function(){y(o.color,(e=>{o.setColor(e),this.value=e,this.style.backgroundColor=e}))}}),t.bottomMask=x({size:2,heading:"底部遮罩",option:a.mask._(i.type,1).$obj,onchange:function(){"none"===this.value?i.remove():i.add(this.value)}}),t.bottomMaskColor=x({size:2,heading:"底部遮罩顏色",type:"button",value:"",color:i.color,backgroundColor:i.color,onclick:function(){y(i.color,(e=>{i.setColor(e),this.value=e,this.style.backgroundColor=e}))}})}this.body="section.body"._(["ul.top"._([v({class:"clr",fa:"fa-solid.fa-arrow-up",title:"前移"})._click((t=>e.moveForward())),v({class:"clr",fa:"fa-solid fa-arrow-down",title:"後移"})._click((t=>e.moveBackward())),v({class:"clr",fa:"fa-solid fa-copy",title:"複製"})._click((t=>e.clone())),v({class:"del",fa:"fa-solid fa-trash-can",title:"刪除"})._click((t=>e.remove()))]),k({show:1,heading:"內容",type:"input",children:t.$keys.filter((e=>t[e]))._$((e=>t[e]))}),k({show:e.hasChild?1:0,heading:`子標籤 (${e.children.length})`,type:"child",children:e.children._$((e=>{return"div"._(["button"._(["fa-solid fa-arrow-right"._fa,new z(t=e).tag])._click((()=>h.init(t))),"section"._(["fa-solid fa-arrow-up"._fa._click((function(){[t,this.$parent(1)].forEach((e=>new z(e).moveForward()))})),"fa-solid fa-arrow-down"._fa._click((function(){[t,this.$parent(1)].forEach((e=>new z(e).moveBackward()))})),"fa-solid fa-bars"._fa])]);var t}))})])}}class _{constructor(){let e={};e.content=k({show:1,heading:"管理",type:"input",children:[x({heading:"名稱",placeholder:""}),x({size:3,heading:"位置",placeholder:""}),x({size:3,heading:"開放站外搜尋",option:a.bool._("是",1).$obj}),x({size:3,heading:"最大寬度",placeholder:"none"})]}),e.head=k({show:1,heading:"Head",type:"input",children:[x({heading:"Title",placeholder:""}),x({heading:"Description",placeholder:""}),x({heading:"Image",placeholder:""})]}),e.facebook=k({heading:"Facebook",type:"input",children:[x({heading:"Title",placeholder:""}),x({heading:"Description",placeholder:""}),x({heading:"Image",placeholder:""})]}),e.twitter=k({heading:"Twitter",type:"input",children:[x({heading:"Title",placeholder:""}),x({heading:"Description",placeholder:""}),x({heading:"Image",placeholder:""})]}),e.share=k({heading:"發布",type:"input",children:[x({heading:"標題",placeholder:""}),x({heading:"描述",placeholder:""}),x({size:2,heading:"預覽",placeholder:""}),x({size:2,heading:"價格",placeholder:"0"})]});const t=e.$keys.filter((t=>null!=e[t]))._$((t=>e[t]));this.body="section.body"._(t)}}class m{constructor(e){const t=window.getComputedStyle(e.body),o=e.body.style;let i={},l=[],s={...t};if(t.$keys.forEach((e=>{const o=t[e];/(width|height|font\-size)/.test(o)||(s[o]=t[o],s[o.$camel]=t[o])})),"body"!=e.body.tagName.toLowerCase()){let t=e.body.$parent(0),o=e.body.$attr("sn")||null,i=e.body.className.replace(/\s/g,"."),n=e.body.tagName.toLowerCase()+(null!=o?`[sn="${o}"]`:"")+(i.trim().length>0?`.${i}`:"");for(;"body"!=t.tagName.toLowerCase();)o=t.$attr("sn")||null,n=t.tagName.toLowerCase()+(null!=o?`[sn="${o}"]`:"")+" > "+n,t=t.$parent(0);n="body > "+n;const a=[...r.styleSheets].filter((e=>"model-css"===e.title))[0].cssRules.$vals.filter((e=>{let t=n;if(!/\.[\w]*$/.test(t)||e.selectorText==n)return e.selectorText==n;for(;/\.[\w]*$/.test(t);)if(t=t.replace(/\.[\w]*$/,""),!/\.[\w]*$/.test(t)||e.selectorText==t)return e.selectorText==t}));if(a.length>0)for(let e=0;e<a.length;e++){const t=a[e].style;t.$keys.forEach((e=>{const o=t[e];s[o]=t[o],s[o.$camel]=t[o]}))}}var d;o.$keys.forEach((e=>{const t=o[e];s[t]=o[t],s[t.$camel]=o[t]})),s.overflowX===s.overflowY?s.overflow=s.overflowX:s.overflow=`${s.overflowX} ${s.overflowY}`,[s.borderTopStyle,s.borderLeftStyle,s.borderBottomStyle,s.borderRightStyle].filter((e=>e!=s.borderTopStyle)).length>0?s.borderStyle=`${s.borderTopStyle} ${s.borderLeftStyle} ${s.borderBottomStyle} ${s.borderRightStyle}`:s.borderStyle=s.borderTopStyle,i.list=e.isList?k({show:1,heading:"列表",type:"input",children:[x({size:2,heading:"Style",placeholder:s.listStyleType,value:s.listStyleType,oninput:function(){e.body.style.listStyleType=this.value},w3:n.listStyleType}),x({size:2,heading:"Position",option:a.listStylePosition._(s.listStylePosition,1).$obj,onchange:function(){e.body.style.listStylePosition=this.value},w3:n.listStylePosition})]}):null,i.display=k({show:1,heading:"顯示",type:"input",children:[x({size:2,heading:"Display",option:a.display._(s.display,1).$obj,onchange:function(){e.body.style.display=this.value,i.flex.$$class_("none",/flex/.test(this.value)),i.grid.$$class_("none",/grid/.test(this.value))},w3:n.display}),x({size:2,heading:"Position",option:a.position._(s.position,1).$obj,onchange:function(){e.body.style.position=this.value},w3:n.position}),x({size:4,heading:"Top",placeholder:"0px",value:s.top,onkeyup:function(){e.body.style.top=this.value},w3:n.top}),x({size:4,heading:"Left",placeholder:"0px",value:s.left,onkeyup:function(){e.body.style.left=this.value},w3:n.left}),x({size:4,heading:"Bottom",placeholder:"0px",value:s.bottom,onkeyup:function(){e.body.style.bottom=this.value},w3:n.bottom}),x({size:4,heading:"Right",placeholder:"0px",value:s.right,onkeyup:function(){e.body.style.right=this.value},w3:n.right}),x({size:3,heading:"Float",option:a.float._(s.float,1).$obj,onchange:function(){e.body.style.float=this.value},w3:n.float}),x({size:3,heading:"Opacity",placeholder:"1",value:s.opacity,onkeyup:function(){e.body.style.opacity=this.value},w3:n.opacity}),x({size:3,heading:"Z-index",placeholder:"auto",value:s.zIndex,onkeyup:function(){e.body.style.zIndex=this.value},w3:n.zIndex}),x({size:3,heading:"Vertical Align",placeholder:s.verticalAlign,value:s.verticalAlign,onkeyup:function(){e.body.style.verticalAlign=this.value},w3:n.verticalAlign}),x({size:3,heading:"Box Sizing",option:a.boxSizing._(s.boxSizing,1).$obj,onchange:function(){e.body.style.boxSizing=this.value},w3:n.boxSizing}),x({size:3,heading:"Overflow",option:a.overflow._(s.overflow,1).$obj,onchange:function(){e.body.style.overflow=this.value},w3:n.overflow}),x({heading:"Transform",placeholder:"none",value:s.transform,onkeyup:function(){e.body.style.transform=this.value},w3:n.transform}),"p"._("Margin"),x({size:4,heading:"Top",placeholder:"0px",value:s.marginTop,onkeyup:function(){e.body.style.marginTop=this.value},w3:n.marginTop}),x({size:4,heading:"Left",placeholder:"0px",value:s.marginLeft,onkeyup:function(){e.body.style.marginLeft=this.value},w3:n.marginLeft}),x({size:4,heading:"Bottom",placeholder:"0px",value:s.marginBottom,onkeyup:function(){e.body.style.marginBottom=this.value},w3:n.marginBottom}),x({size:4,heading:"right",placeholder:"0px",value:s.marginRight,onkeyup:function(){e.body.style.marginRight=this.value},w3:n.marginRight}),"p"._("Padding"),x({size:4,heading:"Top",placeholder:"0px",value:s.paddingTop,onkeyup:function(){e.body.style.paddingTop=this.value},w3:n.paddingTop}),x({size:4,heading:"Left",placeholder:"0px",value:s.paddingLeft,onkeyup:function(){e.body.style.paddingLeft=this.value},w3:n.paddingLeft}),x({size:4,heading:"Bottom",placeholder:"0px",value:s.paddingBottom,onkeyup:function(){e.body.style.paddingBottom=this.value},w3:n.paddingBottom}),x({size:4,heading:"right",placeholder:"0px",value:s.paddingRight,onkeyup:function(){e.body.style.paddingRight=this.value},w3:n.paddingRight})]}),i.flex=k({none:"flex"!==s.display&&"inline-flex"!==s.display,heading:"Flex",type:"input",children:[x({size:3,heading:"Flow",placeholder:"row nowrap",value:s.flexFlow,onkeyup:function(){e.body.style.flexFlow=this.value},w3:"https://www.w3schools.com/cssref/css3_prflex-flow.php"}),x({size:3,heading:"Row Gap",placeholder:"0px",value:o.rowGap||s["row-gap"],onkeyup:function(){e.body.style.rowGap=this.value},w3:"https://www.w3schools.com/cssref/css3_prrow-gap.php"}),x({size:3,heading:"Column Gap",placeholder:"0px",value:o.columnGap||s["column-gap"],onkeyup:function(){e.body.style.columnGap=this.value},w3:"https://www.w3schools.com/cssref/css3_prcolumn-gap.php"}),x({size:3,heading:"Grow",placeholder:"0",value:s.flexGrow,onkeyup:function(){e.body.style.flexGrow=this.value},w3:"https://www.w3schools.com/cssref/css3_prflex-grow.php"}),x({size:3,heading:"Shrink",placeholder:"0",value:s.flexShrink,onkeyup:function(){e.body.style.flexShrink=this.value},w3:"https://www.w3schools.com/cssref/css3_prflex-shrink.php"}),x({size:3,heading:"Basis",placeholder:"auto",value:s.flexBasis,onkeyup:function(){e.body.style.flexBasis=this.value},w3:"https://www.w3schools.com/cssref/css3_prflex-basis.php"}),x({size:2,heading:"Justify Content",placeholder:"normal",value:s.justifyContent,onkeyup:function(){e.body.style.justifyContent=this.value},w3:"https://www.w3schools.com/cssref/css3_prjustify-content.php"}),x({size:2,heading:"Justify Items",placeholder:"normal",value:s.justifyItems,onkeyup:function(){e.body.style.justifyItems=this.value},w3:"https://www.w3schools.com/cssref/css_prjustify-items.php"}),x({size:2,heading:"Align Content",placeholder:"normal",value:s.alignContent,onkeyup:function(){e.body.style.alignContent=this.value},w3:"https://www.w3schools.com/cssref/css3_pralign-content.php"}),x({size:2,heading:"Align Item",placeholder:"normal",value:s.alignItems,onkeyup:function(){e.body.style.alignItems=this.value},w3:"https://www.w3schools.com/cssref/css3_pralign-items.php"})]}),i.grid=k({none:"grid"!==s.display&&"inline-grid"!==s.display,heading:"Grid",type:"input",children:[x({heading:"Area",placeholder:s.gridArea,onkeyup:function(){e.body.style.gridArea=this.value},w3:"https://www.w3schools.com/cssref/pr_grid-area.php"}),x({size:2,heading:"Row",placeholder:s.gridRow,onkeyup:function(){e.body.style.gridRow=this.value},w3:"https://www.w3schools.com/cssref/pr_grid-row.php"}),x({size:2,heading:"Column",placeholder:s.gridColumn,onkeyup:function(){e.body.style.gridColumn=this.value},w3:"https://www.w3schools.com/cssref/pr_grid-column.php"}),x({size:2,heading:"Row Gap",placeholder:s.rowGap,onkeyup:function(){e.body.style.rowGap=this.value},w3:"https://www.w3schools.com/cssref/css3_prrow-gap.php"}),x({size:2,heading:"Column Gap",placeholder:s.columnGap,onkeyup:function(){e.body.style.columnGap=this.value},w3:"https://www.w3schools.com/cssref/css3_prcolumn-gap.php"}),x({size:2,heading:"Template Rows",placeholder:s.gridTemplateRows,onkeyup:function(){e.body.style.gridTemplateRows=this.value},w3:"https://www.w3schools.com/cssref/pr_grid-template-rows.php"}),x({size:2,heading:"Template Columns",placeholder:s.gridTemplateRows,onkeyup:function(){e.body.style.gridTemplateRows=this.value},w3:"https://www.w3schools.com/cssref/pr_grid-template-columns.php"}),x({heading:"Template Areas",placeholder:s.gridTemplateAreas,onkeyup:function(){e.body.style.gridTemplateAreas=this.value},w3:"https://www.w3schools.com/cssref/pr_grid-template-columns.php"}),x({size:2,heading:"Justify Content",placeholder:"normal",value:s.justifyContent,onkeyup:function(){e.body.style.justifyContent=this.value},w3:"https://www.w3schools.com/cssref/css3_prjustify-content.php"}),x({size:2,heading:"Justify Items",placeholder:"normal",value:s.justifyItems,onkeyup:function(){e.body.style.justifyItems=this.value},w3:"https://www.w3schools.com/cssref/css_prjustify-items.php"}),x({size:2,heading:"Align Content",placeholder:"normal",value:s.alignContent,onkeyup:function(){e.body.style.alignContent=this.value},w3:"https://www.w3schools.com/cssref/css3_pralign-content.php"}),x({size:2,heading:"Align Item",placeholder:"normal",value:s.alignItems,onkeyup:function(){e.body.style.alignItems=this.value},w3:"https://www.w3schools.com/cssref/css3_pralign-items.php"})]}),i.size=k({heading:"尺寸",type:"input",children:[x({size:3,heading:"Width",placeholder:"auto",value:s.width,onkeyup:function(){e.body.style.width=this.value}}),x({size:3,heading:"Min Width",placeholder:"auto",value:s.minWidth,onkeyup:function(){e.body.style.minWidth=this.value}}),x({size:3,heading:"Max Width",placeholder:"none",value:s.maxWidth,onkeyup:function(){e.body.style.maxWidth=this.value}}),x({size:3,heading:"Height",placeholder:"auto",value:s.height,onkeyup:function(){e.body.style.height=this.value}}),x({size:3,heading:"Min Height",placeholder:"auto",value:s.minHeight,onkeyup:function(){e.body.style.minHeight=this.value}}),x({size:3,heading:"Max Height",placeholder:"none",value:s.maxHeight,onkeyup:function(){e.body.style.maxHeight=this.value}})]}),i.background=k({heading:"背景",type:"input",children:[x({size:2,heading:"Color",type:"button",value:s.backgroundColor,color:"#fff",backgroundColor:s.backgroundColor,onclick:function(){y(s.backgroundColor,(t=>{e.body.style.backgroundColor=t,this.value=t,this.style.backgroundColor=t}))},w3:n.color}),x({size:2,heading:"Linear Gradient",placeholder:"none",value:(d=s.backgroundImage.match(/linear-gradient\(([A-Za-z0-9\,\(\) ]+)?\)/),d&&d[1]&&(d=d[1]),d),onkeyup:function(){e.body.style.backgroundImage=this.value.length?`linear-gradient(${this.value})`:"unset"},w3:n.gradient}),x({size:3,heading:"Image",type:"file",placeholder:"選擇檔案",onchange:function(){},w3:n.backgroundImage}),x({size:3,heading:"Repeat",option:a.backgroundRepeat._(s.backgroundRepeat,1).$obj,onchange:function(){e.body.style.backgroundRepeat=this.value},w3:n.backgroundRepeat}),x({size:3,heading:"Position",placeholder:"0% 0%",value:s.backgroundPosition,onkeyup:function(){e.body.style.backgroundPosition=this.value},w3:n.backgroundPosition}),x({size:3,heading:"Size",placeholder:"auto",value:s.backgroundSize,onkeyup:function(){e.body.style.backgroundSize=this.value},w3:n.backgroundSize}),x({size:3,heading:"Attachment",option:a.backgroundAttachment._(s.backgroundAttachment,1).$obj,onchange:function(){e.body.style.backgroundAttachment=this.value},w3:n.backgroundAttachment}),x({size:3,heading:"Clip",option:a.backgroundClip._(s.backgroundClip,1).$obj,onchange:function(){e.body.style.backgroundClip=this.value},w3:n.backgroundClip})]}),i.text=k({heading:"文字",type:"input",children:[x({size:2,heading:"Color",type:"button",value:s.color,color:"#fff",backgroundColor:s.color,onclick:function(){y(s.color,(t=>{e.body.style.color=t,this.value=t,this.style.backgroundColor=t}))},w3:n.color}),x({size:2,heading:"Align",option:a.textAlign._(s.textAlign,1).$obj,onchange:function(){e.body.style.textAlign=this.value},w3:n.textAlign}),x({size:2,heading:"Line Height",placeholder:"normal",value:s.lineHeight,onkeyup:function(){e.body.style.lineHeight=this.value},w3:n.lineHeight}),x({size:2,heading:"Letter Spacing",placeholder:"normal",value:s.letterSpacing,onkeyup:function(){e.body.style.letterSpacing=this.value},w3:n.letterSpacing}),"p"._("Decoration"),x({size:2,heading:"Decoration",option:a.textDecoration._(s.textDecorationLine,1).$obj,onchange:function(){e.body.style.textDecorationLine=this.value},w3:n.textDecorationLine}),x({size:2,type:"button",heading:"Color",value:s.textDecorationColor,color:"#fff",backgroundColor:s.textDecorationColor,onclick:function(){y(s.textDecorationColor,(t=>{e.body.style.textDecorationColor=t,this.value=t,this.style.backgroundColor=t}))},w3:n.textDecorationColor}),x({size:2,heading:"Style",option:a.textDecorationStyle._(s.textDecorationStyle,1).$obj,onchange:function(){e.body.style.textDecorationStyle=this.value,e.body.style.textDecoration=s.textDecoration},w3:n.textDecorationStyle}),x({size:2,heading:"Thickness",placeholder:"auto",value:s.textDecorationThickness,onkeyup:function(){e.body.style.textDecorationThickness=this.value},w3:n.textDecorationThickness}),"p"._("Font"),x({heading:"Family",option:a.fontFamily._(s.fontFamily,1).$obj,onchange:function(){e.body.style.fontFamily=this.value},w3:n.fontFamily}),x({size:3,heading:"Style",option:a.fontStyle._(s.fontStyle,1).$obj,onchange:function(){e.body.style.fontStyle=this.value},w3:n.fontStyle}),x({size:3,heading:"Size",placeholder:"16px",value:s.fontSize,onkeyup:function(){e.body.style.fontSize=this.value},w3:n.fontSize}),x({size:3,heading:"Weight",placeholder:"400",value:s.fontWeight,onkeyup:function(){e.body.style.fontWeight=this.value},w3:n.fontWeight})]}),i.border=k({heading:"邊框",type:"input",children:[x({size:2,heading:"Color",type:"button",value:s.borderColor,color:"#fff",backgroundColor:s.borderColor,onclick:function(){y(s.borderColor,(t=>{e.body.style.borderColor=t,this.value=t,this.style.backgroundColor=t}))},w3:n.color}),x({size:2,heading:"Style",option:a.borderStyle._(s.borderStyle,1).$obj,onchange:function(){e.body.style.borderStyle=this.value},w3:n.borderStyle}),x({size:4,heading:"Top",placeholder:"0px",value:s.borderTopWidth,onkeyup:function(){e.body.style.borderTopWidth=this.value},w3:n.borderTopWidth}),x({size:4,heading:"Left",placeholder:"0px",value:s.borderLeftWidth,onkeyup:function(){e.body.style.borderLeftWidth=this.value},w3:n.borderLeftWidth}),x({size:4,heading:"Bottom",placeholder:"0px",value:s.borderBottomWidth,onkeyup:function(){e.body.style.borderBottomWidth=this.value},w3:n.borderBottomWidth}),x({size:4,heading:"right",placeholder:"0px",value:s.borderRightWidth,onkeyup:function(){e.body.style.borderRightWidth=this.value},w3:n.borderRightWidth})]}),i.radius=k({heading:"圓角",type:"input",children:[x({size:2,heading:"Top Left",placeholder:"0px",value:s.borderTopLeftRadius,onkeyup:function(){e.body.style.borderTopLeftRadius=this.value},w3:n.borderTopLeftRadius}),x({size:2,heading:"Top Right",placeholder:"0px",value:s.borderTopRightRadius,onkeyup:function(){e.body.style.borderTopRightRadius=this.value},w3:n.borderTopRightRadius}),x({size:2,heading:"Bottom right",placeholder:"0px",value:s.borderBottomRightRadius,onkeyup:function(){e.body.style.borderBottomRightRadius=this.value},w3:n.borderBottomRightRadius}),x({size:2,heading:"Bottom Left",placeholder:"0px",value:s.borderBottomLeftRadius,onkeyup:function(){e.body.style.borderBottomLeftRadius=this.value},w3:n.borderBottomLeftRadius})]}),i.other=k({heading:"其他",type:"input",children:[]}),i.$keys.filter((e=>null!=i[e])).forEach((e=>l.push(i[e]))),this.body="section.body"._(l)}}class w{constructor(){this.is_style=!1,null==this.body&&(this.body="section.right"._(),s.$parent(0)._child([this.body]),this.init())}init(e){const t=null==e;null==this.now_selected&&t?this.now_selected=new z(r.body):t?e=this.now_selected:this.now_selected=new z(e),(()=>{let e=r.body.$sel("*[edit='1']");null!=e&&(e._attr({edit:0}),e.$parent(0)._attr({parent:0}),this.now_selected.body===r.body&&(this.is_style=!1))})(),l.event.bodyRightSwitch(void 0,1),this.now_selected.selected();let o=new b(this.now_selected);this.is_style?this.changeToStyleEdit():this.body.__child([this.initTab(0),this.initContentEditButton(0),o.body,"span"._(),this.initBottomPath()])}add(e){const t=/^(time|span|i|label|input|textarea|select|img|audio|video|iframe|table|thead|tbody|tr|ul|ol|hr)/i;let o=this.now_selected.body;if(t.test(this.now_selected.tagName)){let i=o.$parent(0),n=i.tagName,a=o.$i,l=i.$child(a+1);for(;t.test(n);)a=i.$i,i=i.$parent(0),n=i.tagName,o=i.$child(a),l=i.$child(a+1);l?i.insertBefore(z.new(e),l):i._child(z.new(e))}else(()=>{!this.now_selected.children.length&&this.now_selected.innerHTML&&this.now_selected.body.__child(z.new("span"._(this.now_selected.innerHTML)))})(),this.now_selected.body._child(z.new(e)),this.now_selected.body===r.body&&r.scrollToBottom(),this.init()}initTab(e){return"ul.tab"._({index:e},[v({fa:"fa-solid fa-sliders",title:"編輯"})._click((e=>this.init())),v({fa:"fa-solid fa-table-list",title:"頁面"})._click((e=>this.changeToPageEdit()))])}initContentEditButton(e){return"ul.button.r3"._({index:e},[v({fa:"fa-solid fa-pen-to-square",title:"內容"})._click((e=>(this.is_style=!1,this.init()))),v({fa:"fa-solid fa-pen-ruler",title:"樣式"})._click((e=>(this.is_style=!0,this.changeToStyleEdit()))),v({fa:"fa-solid fa-ellipsis",title:"更多"})])}initBottomPath(){let e="li"._("body")._click((()=>this.init(r.body))),t=this.now_selected.path._$((e=>"li"._(new z(e).tag)._click((()=>this.init(e)))));return"ul.path"._([e,...t])}changeToStyleEdit(){let e=new m(this.now_selected);this.body.__child([this.initTab(0),this.initContentEditButton(1),e.body,"span"._(),this.initBottomPath()])}changeToPageEdit(){let e=new _;this.body.__child([this.initTab(1),e.body])}}class ${constructor(e,t){this.parent=e,this.position=t,this.type="none",this.color="rgb(255,255,255)";let o=e.body.$sel(`svg.mask.${t}`);if(null==o||o.$parent(0)!==e.body)return this;this.body=o,this.type=o.$attr("type"),this.color=o.$child(-1).$attr("fill")}setColor(e){if(this.color=e,/wave/.test(this.type)){let t=e.replace(/^rgba?\(|\s+|\)$/g,"").split(","),o=t[0],i=t[1],n=t[2],a=t[3]?t[3]:1,l=`rgba(${o-16}, ${i-16}, ${n-16}, ${a/4})`,s=`rgba(${o-32}, ${i-32}, ${n-32}, ${a/6})`;this.body.$child(-1)._attr({fill:e}),this.body.$child(-2)._attr({fill:s}),this.body.$child(-3)._attr({fill:l})}else this.body.$child(-1)._attr({fill:e})}add(e){let t,o="top"===this.position;this.type=e,null!=this.body&&this.body.$rm(),/convex/g.test(e)?t=this.addConvex(e):/concave/g.test(e)?t=this.addConcave(e):/slash-left/g.test(e)?t=this.addSlash(e,o?1:0):/slash-right/g.test(e)?t=this.addSlash(e,o?0:1):/wave/g.test(e)&&(t=this.addWave(e)),this.body=t,this.parent.body._child(t)}addConvex(e){let t=this.parent.body.clientWidth,o=e.split("-").$(-1),i=Math.floor(t/2);return`svg.mask.${this.position}`._({type:e,style:{width:"100%",height:o/2+"px"}})._child("path"._({d:`M 0 ${o}, Q ${i} 0, ${t} ${o}, L 0 ${o}`,fill:this.color}))}addConcave(e){let t=this.parent.body.clientWidth,o=e.split("-").$(-1),i=Math.floor(t/2);return`svg.mask.${this.position}`._({type:e,style:{width:"100%",height:`${o}px`}})._child("path"._({d:`M 0 0, Q ${i} ${2*o}, ${t} 0, L ${t} ${o}, 0 ${o}`,fill:this.color}))}addSlash(e,t){let o=this.parent.body.clientWidth,i=e.split("-").$(-1);return`svg.mask.${this.position}`._({type:e,style:{width:"100%",height:`${i}px`}})._child("path"._({d:t?`M 0 ${i}, L ${o} 0, L ${o} ${i}`:`M ${o} ${i}, L 0 0, L 0 ${i}`,fill:this.color,stroke:"none"}))}addWave(e){let t=this.parent.body.clientWidth,o=this.color.replace(/^rgba?\(|\s+|\)$/g,"").split(","),i=o[0],n=o[1],a=o[2],l=o[3]?o[3]:1,s=`rgba(${i-16}, ${n-16}, ${a-16}, ${l/2})`,d=`rgba(${i-32}, ${n-32}, ${a-32}, ${l/4})`,r=Math.floor(t/6),h=Math.floor(t/6*2),c=Math.floor(t/6*3),u=Math.floor(t/6*4),p=Math.floor(t/6*5);return`svg.mask.${this.position}`._({type:e,style:{width:"100%",height:"72px"}})._child(["path"._({d:`M -100 36, C ${r-100} 0, ${h-100} 36, ${h-100} 36, C ${c-100} 72, ${u-100} 36, ${u-100} 36, C ${p-100} 0, ${t-100} 36, ${t-100} 36, L ${t-100} 72, L0 72`,fill:s,stroke:"none"}),"path"._({d:`M 150 36, C ${r+150} 0, ${h+150} 36, ${h+150} 36, C ${c+150} 72, ${u+150} 36, ${u+150} 36, C ${p+150} 0, ${t+150} 12, ${t+150} 12, L ${t+150}  72, L0 72`,fill:d,stroke:"none"}),"path"._({d:`M 0 36, C ${r} 0, ${h} 36, ${h} 36, C ${c} 72, ${u} 36, ${u} 36, C ${p} 0, ${t} 36, ${t} 36, L ${t} 72, L0 72`,fill:this.color,stroke:"none"})])}remove(){this.body.$rm()}}let v=function(e){return("li"+(e.class?`.${e.class}`:""))._([e.fa._fa,e.title])._click(e.onclick)},k=function(e){return`section${e.show?"":".hide"}${e.none?".none":""}`._(["button"._([e.heading,"fa-solid fa-angle-right"._fa])._click((function(){let e=this.$parent(0),t=this.$next(0),o=e.$$class("hide");if(t.style.maxHeight=`${t.scrollHeight}px`,o)return e.class_("hide");let i=setTimeout((()=>{clearTimeout(i),t.style.maxHeight=0,e._class("hide")}),1)})),`section.${e.type}`._(e.children)])},x=function(e){let t=`label${e.size?`.r${e.size}`:""}`,o="a"._([e.heading,("連結"===e.heading?"fa-solid fa-circle-right":"fa-solid fa-circle-question")._fa]);return"string"==typeof e.w3&&o._open(e.w3),"連結"===e.heading&&(e.value||"").trim().length>0&&o._open(e.value),e.option?t._([o,"select"._(e.option.$keys._$((t=>"option"._({value:t,selected:e.option[t]?"selected":null},t))))._change(e.onchange)]):"file"===e.type?t._([o,"input"._({type:"file",placeholder:"選擇檔案"})._change(e.onchange),"fa-solid fa-minus"._fa]):"button"===e.type?t._([o,"input"._({type:"button",value:e.value,style:{color:e.color?e.color:"#000",backgroundColor:e.backgroundColor?e.backgroundColor:"#fff"}})._click(e.onclick)]):"textarea"===e.type?t._([o,"textarea"._({placeholder:e.placeholder,value:e.value,style:{fontFamily:e.fontFamily?e.fontFamily:""}})._focus(e.focus)._keydown(e.onkeydown)._input(e.oninput)._keyup(e.onkeyup)._blur(e.blur)]):t._([o,"input"._({type:"text",placeholder:e.placeholder?e.placeholder:"",value:e.value&&e.value!==e.placeholder?e.value:""})._focus(e.focus)._keydown(e.onkeydown)._input(e.oninput)._keyup(e.onkeyup)._blur(e.blur)])};class z{constructor(e){let t=e.tagName.toLowerCase(),o=e.className;!/^svg|br|option|source|path$/.test(t)&&o&&(o=`.${o.replace(/ /g,".")}`);let i=`${t}${o}`;e._attr({tag:i}),this.tagName=t,this.tag=i,this.body=e,this.isHeading=/^h[1-6]+$/i.test(t),this.isLink=/^a$/i.test(t),this.isButton=/^button$/.test(t),this.isImg=/^img$/i.test(t),this.isAudio=/^audio$/i.test(t),this.isVideo=/^video$/i.test(t),this.isInput=/^(textarea|input)$/.test(t),this.isTextarea=/^textarea$/.test(t),this.isSpan=/^span$/.test(t),this.isList=/^(ul|ol)$/.test(t),this.isTime=/^time/.test(t),this.isSelect=/^select/.test(t),this.isFa=/^i\.fa\-/.test(i),this.isYt=/^iframe\.yt/.test(i),this.isMap=/^iframe\.map/.test(i),this.isFa&&(i="fontawesome")}get innerHTML(){const e=this.body._$(!0);return(e.$text||"").trim().length<1?null:e.$text}get parent(){return this.body.$parent(0)}get pre(){return this.body.$pre(0)}get next(){return this.body.$next(0)}get target(){const e=this.body.$attr("target");return(e||"").trim().length<1?"_self":e}get path(){let e=this.body,t=[];for(;e!==r.body;)t.push(e),e=e.$parent(0);return t.reverse()}get children(){return this.body.$childAll.filter((e=>!/^(br|svg|option|source)$/i.test(e.tagName)))}get canMask(){return this.parent===r.body&&/^header|section|footer$/i.test(this.tagName)}get hasChild(){return this.children.length>0}static new(e){return e._click((function(e){e.stopPropagation(),h.init(this)})).$selAll("*").forEach((e=>{e._click((function(e){e.stopPropagation(),h.init(this)}))})),e}selected(){this.body._attr({edit:1}),this.parent._attr({parent:1})}moveForward(){this.body!==r.body&&null!=this.pre&&this.parent.insertBefore(this.body,this.pre)}moveBackward(){if(this.body===r.body||null==this.next)return;let e=this.next.$next(0);e?this.parent.insertBefore(this.body,e):this.parent._child(this.body)}clone(){if(this.body===r.body)return;let e=z.new(this.body._$(!0)._attr({edit:0}));this.next?this.parent.insertBefore(e,this.next):this.parent._child(e)}remove(){if(this.body===r.body)return;let e;e=this.pre?this.pre:this.next?this.next:this.parent,this.parent._attr({parent:0}),this.body.$rm(),h.init(e)}}export{z as target};